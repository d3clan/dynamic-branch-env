# Environment Lifecycle Flow

Sequence diagram showing the complete lifecycle of creating a virtual environment

```mermaid
participant User
participant API
participant Lambda
participant DynamoDB
participant CDK
participant CloudFormation
participant Route53

User->>API: POST /environments
API->>Lambda: Create Environment Request
Lambda->>DynamoDB: Check capacity & conflicts
DynamoDB-->>Lambda: Validation OK
Lambda->>DynamoDB: Create environment record (PENDING)
Lambda->>CDK: Trigger CDK deployment
CDK->>CloudFormation: Deploy stack
CloudFormation-->>CDK: Stack creation started
Lambda->>Route53: Create DNS record
Lambda->>DynamoDB: Update status (PROVISIONING)
CloudFormation-->>Lambda: Stack complete
Lambda->>DynamoDB: Update status (ACTIVE)
Lambda-->>User: Environment ready
```

---
*Generated by Technical Architect Agent*
